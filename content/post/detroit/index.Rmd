---
title: "Detroit"
date: 2022-02-10T00:00:00-00:00
categories: ["R"]
tags: ["detroit"]
publishdate: 2022-02-02T00:00:00-00:00
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(collapse = TRUE,
                      include = FALSE)
```

## Assignment

Instead of traditional problem sets, this course has a single four part assignment where you will build upon your previous work each week with new material from the course. You will explore property assessment in Detroit, Michigan and create an assessment model. After the completion of the assignment, you will wrap your model into a report which analyzes the effectiveness of your model based on the ethical and other frameworks from class and make a brief presentation to the class.

## Submissions

You will do all of your work for this assignment by creating a repository in [GitHub Classroom](https://classroom.github.com/a/m8Yk_ZMs). Please submit your work via descriptively worded commits such as 'part 1 final submission.' I will provide feedback via pull requests so please do not merge/close the pull request. Please add your GitHub username to [this sheet](https://docs.google.com/spreadsheets/d/1XwYqZwJW8L7tJHesI4juo8xlFeXWVi0Kw7B6L450om8/edit?usp=sharing) to facilitate grading.

## Part 1 (Due 2/13, 11:59pn)

You have been tasked with undertaking a multi-part analysis of homes in Detroit, Michigan. You are provided with a database to facilitate this analysis. This database was constructed from the [Detroit Open Data portal](https://data.detroitmi.gov) and numerous FOIA requests. More information is included in the databases *readme*. Note that the database must be downloaded via the link provided in the readme.

Using `part_1.Rmd` in the reports folder, edit that file to accomplishes the following tasks:

- Section A: Conduct an exploratory data analysis of homes in Detroit. Offer an overview of relevant trends in the data and data quality issues. Contextualize your analysis with [key](https://scholarship.law.uci.edu/ucilr/vol9/iss4/3/) [literature](https://harris.uchicago.edu/files/evalrespropertytaxasdetroit20162018.pdf) on properties in Detroit.
- Section B: Use [`cmfproperty`](https://erhla.github.io/cmfproperty/index.html) to conduct a sales ratio study across the relevant time period. Note that `cmfproperty` is designed to produce Rmarkdown reports but [use the documentation](https://erhla.github.io/cmfproperty/articles/cmfproperty.html) and insert relevant graphs/figures into your report. Look to make this reproducible since you'll need these methods to analyze your assessment model later on. Detroit has many sales which are not arm's length (sold at fair market value) so some sales should be excluded, but which ones?
- Section C: Explore trends and relationships with property sales using simple regressions
- Section D: Explore trends and relationships with foreclosures using simple regressions

## [Part 1 Solution](/solutions/part_1.Rmd)
## [Part 1 Html](/solutions/part_1.html)


## Part 2 (Due 2/27, 11:59pm)

Objective: Now that you have a decent understanding of the landscape in Detroit, create a new file (part_2.Rmd) which builds upon part_1 in the html report Rmarkdown style.

Submission: submit to Blackboard both your code and the knitted Rmarkdown output.

Part A

Create an 'introduction' to your report. Generally, only include stylized output (do not use base R print). This could mean using stargazer to show regressions, DT::datatable to show data.frames, and adding titles/labels to plots. Your introduction should include:

1. Brief background (2-3 sentences) on issues in the Detroit assessment space
2. 3 to 4 graphs with descriptive captions which include information on sale price, assessment accuracy, foreclosures, and outliers. Generally focus on single family homes and arm's length transactions. While it is notable that so many properties are sold for small amounts, we typically only want to look at properties which are class 401, taxable (e.g. assessed over 2000 or so), and sell above $4,000.

Part B

We have two separate (but very related) problems we want to model. First, we want to find a way to identify if a home is likely to be overassessed in a given year. We will analyze homes and assessments from 2016. We will use tidymodels to create a workflow.

1. Create your workflow
2. Add to your workflow a classification model
3. Add to your workflow a recipe of preprocessing steps. Use 2016 sales and assessments with the parcels property characteristics (note that we only know if a home was overassessed if it sold). Create a classification metric of overassessment based on properties which sold and use this as your **dependent** variable. Explain how you decided to construct this metric and how many classes it has.
4. Create testing/training data and evaluate your model using the classification metrics from tables 8.3 and 8.4 from the textbook and the classification probability metric ROC curves.

Part C

Second, building off of the workflow from part B. Create a second model to create your own 2019 assessments. (Note that I am choosing this year to avoid impacts from the pandemic and data quality issues. You may, if you'd like, create 2022 assessments. Limited sales data is released [here](https://detroitmi.gov/departments/office-chief-financial-officer/ocfo-divisions/office-assessor/sales-study).)

1. Create your workflow
2. Add to your workflow a model
3. Add to your workflow a recipe of preprocessing steps. Use sales and assessments from before 2019 with the parcels property characteristics.
4. Create testing/training data and evaluate your model using numeric metrics RMSE and MAPE.

## Part 3 (Due 3/10)

Create `part_3.Rmd` in the reports folder, copying the yaml/framework from `part_1.Rmd`.

Retrospectively gauge the accuracy of assessments and identify properties which were most likely to be assessed incorrectly. Distill your model into a 'scorecard' type format which would allow someone to calculate by hand their overassessment likelihood.

## Part 4 (Due 3/17)

Create `part_4.Rmd` in the reports folder, copying the yaml/framework from `part_1.Rmd`.

Test and evaluate your model to assess properties. More details to come.

## Final Submission (Due 3/31)

Create `final_report.Rmd` in the reports folder, copying the yaml/framework from `part_1.Rmd`.

Bring together your previous submissions into one cohesive report. This report should offer a brief overview of the problem (assessment), general trends on properties, your model, why your model is better than other models, and any technical or ethical critiques. More details to come.

## Grading Overview

For each assignment, you will be graded on substantial completion of the assignment (demonstrated by an attempt of all parts). When submitting parts 2, 3, and 4, you will be additionally graded on your incorporation of feedback, new concepts from the course, or the correction of any flagged issues.

The assignment will culminate in a final submission of code/report and presentation. Code will be graded based on reproducibility, conceptual understanding, and accuracy. The report will be an Rmarkdown file which knits together graphs, tables, and ethical frameworks. It should be concise (include only relevant information from Parts 1-4). This report will be used to give a five minute presentation to the class on your model and ethnical/technical issues with Detroit property assessment.


| Date   | Points | Category                                     | Notes                                                                           |
|-----------|-----------|----------------------------------------------|-------------------------------------------|
| 10-Feb | 5      | Substantial Completion (attempted all parts) | Part 1 Due                                                                      |
| 24-Feb | 5      | Substantial Completion (attempted all parts) | Part 2 Due                                                                      |
| 24-Feb | 5      | Incorporation of Feedback/New Concepts       | From Part 1                                                                     |
| 10-Mar | 5      | Substantial Completion (attempted all parts) | Part 3 Due                                                                      |
| 10-Mar | 5      | Incorporation of Feedback/New Concepts       | From Part 2                                                                     |
| 17-Mar | 5      | Substantial Completion (attempted all parts) | Part 4 Due                                                                      |
| 17-Mar | 5      | Incorporation of Feedback/New Concepts       | From Part 3                                                                     |
| 31-Mar | 30     | Final Code                                   | Reproducible (10), Concepts (10), Accurate (10)                                 |
| 31-Mar | 20     | Final Report                                 | Via Rmarkdown HTML, contextualized analysis and ethics |
| 31-Mar | 15     | Final Presentation                           | 5 minute presentation on model and insights                                     |
